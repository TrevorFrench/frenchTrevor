<html>
<head>
	<title>D3.js Key Concepts</title>

	<style type="text/css">
		body{
			background-color: #ccc;
			width: 100%;	
		}
		#chart{
			background-color: #ccc;
			width: 1000px;
			height: 500px;
			margin: 50px auto;
			border: solid 1px #000;
		}
		svg{
			background-color: #fff;
		}
		.dot{
			stroke: #000;
			stroke-width: 1px;
		}
		.axis line, .axis path{
			stroke: #bbb;
		}
		.axis text{
			fill: #bbb; /* make sure you use fill instead of color */
		}
	</style>

	<script type="text/javascript" src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>

		<div id="chart"></div>

		<script type="text/javascript">
			var margin = 30, width = 1000, height = 500;
			var circles, xScale, yScale, xAxis, yAxis;

			var svg = d3.select('#chart')
				.append('svg')
				.attr('width', width + 'px')
				.attr('height', height + 'px');

			d3.csv("boston-housing.csv")
				.then(function(data){
				//console.log(data);

				data = data.sort(function(a,b){		// sorting data so that orange dots are brought to the front
					return a.charles - b.charles;
				});

				xMinMax = d3.extent(data, function(d){ // find the minimum and maximmum value from the data from the specified field
					return parseFloat(d.poor);
				});
				yMinMax = d3.extent(data, function(d){ // find the minimum and maximmum value from the data from the specified field
					return parseFloat(d.rooms);
				});
				rMinMax = d3.extent(data, function(d){ // find the minimum and maximmum value from the data from the specified field
					return parseFloat(d.value);
				});
				//console.log(xMinMax);

				xScale = d3.scaleLinear()
					.domain([xMinMax[0],xMinMax[1]]) // input
					.range([margin + rValues[1],width-margin-rValues[1]]); //output (pixels on the screen)
				yScale = d3.scaleLinear()
					.domain([yMinMax[1],yMinMax[0]]) //invert the y scale
					.range([margin + rValues[1],height-margin-rValues[1]]);
				rScale = d3.scaleLinear()
					.domain([rMinMax[0],rMinMax[1]])
					.range([rValues[0],rValues[1]]);

				cScale = d3.scaleOrdinal()
					.domain([0,1])
					.range(['#333', '#FF6600']);

				circles = svg.selectAll('.dot')
					.data(data)
					.enter()
					.append('circle')
					.attr('class', 'dot')
					.attr('cx',function(d){
						//console.log(d);
						return xScale(d.poor); // data itself.name of the field * 30
					})
					.attr('cy',function(d){
						//console.log(d);
						return yScale(d.rooms); // data itself.name of the field * 50
					})
					.attr('r',function(d){
						//console.log(d);
						return rScale(d.value); // data itself.name of the field / 2
					})
					.attr('fill', function(d){
						return cScale(d.charles);
					})
					.style('opacity', function(d){
						return d.charles == 1 ? 1 : 0.3; // essentially an if (?) else (:) statement in javascript
					}); // 0 through 1 for opacity

				xAxis = d3.axisBottom(xScale).tickValues([xMinMax[0],xMinMax[1]]);
				yAxis = d3.axisLeft(yScale).tickValues([yMinMax[0],yMinMax[1]]);

				xAxisG = svg.append('g')
					.attr('id','xAxis')
					.attr('class', 'axis');
				yAxisG = svg.append('g')
					.attr('id','yAxis')
					.attr('class', 'axis');

				xAxisG.call(xAxis)
					.attr('transform', 'translate(0,' + (height-margin) + ')');
				yAxisG.call(yAxis)
					.attr('transform', 'translate(30,0)');

			});
		</script>

</body>
</html>