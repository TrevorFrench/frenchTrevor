<html>
<head>
	<title>D3.js Key Concepts</title>

	<style type="text/css">
		body{
			background-color: #ccc;
			width: 100%;	
		}
		#chart{
			background-color: #ccc;
			width: 1000px;
			height: 500px;
			margin: 50px auto;
			border: solid 1px #000;
		}
		svg{
			background-color: #fff;
		}
		.dot{
			stroke: #000;
			stroke-width: 1px;
		}
	</style>

	<script type="text/javascript" src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>

		<div id="chart"></div>

		<script type="text/javascript">
			var margin = 30, width = 1000, height = 500;
			var circles;

			var svg = d3.select('#chart')
				.append('svg')
				.attr('width', width + 'px')
				.attr('height', height + 'px');

			d3.csv("boston-housing.csv")
				.then(function(data){
				//console.log(data);

				xMinMax = d3.extent(data, function(d){ // find the minimum and maximmum value from the data from the specified field
					return parseFloat(d.poor);
				});
				yMinMax = d3.extent(data, function(d){ // find the minimum and maximmum value from the data from the specified field
					return parseFloat(d.rooms);
				});
				rMinMax = d3.extent(data, function(d){ // find the minimum and maximmum value from the data from the specified field
					return parseFloat(d.value);
				});
				//console.log(xMinMax);

				xScale = d3.scaleLinear()
					.domain([xMinMax[0],xMinMax[1]]) // input
					.range([margin,width-margin]); //output (pixels on the screen)
				yScale = d3.scaleLinear()
					.domain([yMinMax[1],yMinMax[0]]) //invert the y scale
					.range([margin,height-margin]);
				rScale = d3.scaleLinear()
					.domain([rMinMax[0],rMinMax[1]])
					.range([2,10]);

				circles = svg.selectAll('.dot')
					.data(data)
					.enter()
					.append('circle')
					.attr('class', 'dot')
					.attr('cx',function(d){
						//console.log(d);
						return xScale(d.poor); // data itself.name of the field * 30
					})
					.attr('cy',function(d){
						//console.log(d);
						return yScale(d.rooms); // data itself.name of the field * 50
					})
					.attr('r',function(d){
						//console.log(d);
						return rScale(d.value); // data itself.name of the field / 2
					})
					.attr('fill','#000')
					.style('opacity', 0.5); // 0 through 1 for opacity

			});
		</script>

</body>
</html>